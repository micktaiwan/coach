<head>
  <title>Coach</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Montserrat">
</head>
<template name="header">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Coach</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      {{#if currentUser}}
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        </div>
        <div class="ml-auto">
          {{> contextSelect}}
        </div>
      {{/if}}
      <div class="collapse navbar-collapse">
        {{> loginButtons}}
      </div>
    </div>
  </nav>
</template>
<template name="layout">
  <div id="layout">
    {{> header}}
    <div class="container-fluid">
      <div class="row">
        <nav id="sidebarMenu" class="col-3 col-lg-2 sidebar">
          <div class="position-sticky pt-3">
            <ul class="nav flex-column">
              <li class="nav-item"><a class="nav-link {{activeRoute '/'}}" aria-current="page" href="/"><span class="material-icons-outlined">question_answer</span> Chats </a></li>
              <li class="nav-item"><a class="nav-link {{activeRoute '/tasks'}}" aria-current="page" href="/tasks"><span class="material-icons-outlined">task</span> Tasks </a></li>
              <li class="nav-item"><a class="nav-link {{activeRoute '/contexts'}}" aria-current="page" href="/contexts"><span class="material-icons-outlined">description</span> Context </a></li>
              <li class="nav-item"><a class="nav-link {{activeRoute '/settings'}}" aria-current="page" href="/settings"><span class="material-icons-outlined">settings</span> Settings </a></li>
            </ul>
          </div>
        </nav>
        <main class="col-9 ms-sm-auto col-lg-10 px-md-4">
          {{#unless currentUser}}
            <div class="container">
              <div class="alert alert-warning" role="alert">
                Please login
              </div>
            </div>
          {{else}}
            <div class="container">
              {{#unless Session 'contextId'}}
                <div class="alert alert-warning" role="alert">
                  Please select a context
                </div>
              {{else}}
                {{> Template.dynamic template=main}}
              {{/unless}}
            </div>
          {{/unless}}
        </main>
      </div>
    </div>
    <footer>
    </footer>
  </div>
</template>
<template name="home">
  <h1><span class="material-icons-outlined">question_answer</span> Chats</h1>
  <button class="js-remove-all-chats btn btn-danger">Remove All Chats</button>
  <button class="js-find-priority btn btn-primary">Priority suggestion</button><br>
  <div class="chats">
    <div class="chat assistant">
      <div class="role">assistant</div>
      <div class="message"> Welcome to Coach!<br>
        How can I help you ?<br></div>
    </div>
  </div>
  {{> chats}}
  {{> usageStats}}
</template>
<template name="usageStats">
  <div class="stats">
    {{#each usageStats}}
      <b>{{formatDate createdAt}}</b>
      {{json2string usage}}
    {{/each}}
  </div>
</template>
<template name="contextSelect">
  <select name="context-select">
    <option value="">Select a context</option>
    {{#each contexts}}
      <option value="{{_id}}">{{name}}</option>
    {{/each}}
    <option value="new">New context</option>
  </select>
</template>