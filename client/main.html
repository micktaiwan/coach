<head>
  <title>Coach</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Montserrat">
</head>
<template name="header">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Coach</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      {{#if currentUser}}
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-link active" aria-current="page" href="/">Chat</a>
            <a class="nav-link" href="/tasks">Tasks</a>
            <a class="nav-link" href="/contexts">Context</a>
            <a class="nav-link" href="/settings">Settings</a>
          </div>
        </div>
        <div class="ml-auto">
          {{> contextSelect}}
        </div>
      {{/if}}
      <div class="collapse navbar-collapse">
        {{> loginButtons}}
      </div>
    </div>
  </nav>
</template>
<template name="layout">
  {{> header}}
  {{#unless currentUser}}
    <div class="container">
      <div class="alert alert-warning" role="alert">
        Please login
      </div>
    </div>
  {{else}}
    <div class="container">
      {{#unless Session 'contextId'}}
        <div class="alert alert-warning" role="alert">
          Please select a context
        </div>
      {{else}}
        {{> Template.dynamic template=main}}
      {{/unless}}
    </div>
  {{/unless}}
</template>
<template name="home">
  <button class="js-remove-all-chats btn btn-danger">Remove All Chats</button>
  <button class="js-find-priority btn btn-primary">Priority suggestion</button><br>
  <div class="chats">
    <div class="chat assistant">
      <div class="role">assistant</div>
      <div class="message"> Welcome to Coach!<br>
        How can I help you ?<br></div>
    </div>
  </div>
  {{> chats}}
  {{> usageStats}}
</template>
<template name="usageStats">
  <div class="stats">
    {{#each usageStats}}
      <b>{{formatDate createdAt}}</b>
      {{json2string usage}}
    {{/each}}
  </div>
</template>
<template name="contextSelect">
  <select name="context-select">
    <option value="">Select a context</option>
    {{#each contexts}}
      <option value="{{_id}}">{{name}}</option>
    {{/each}}
    <option value="new">New context</option>
  </select>
</template>